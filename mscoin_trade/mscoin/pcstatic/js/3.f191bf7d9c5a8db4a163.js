webpackJsonp([3],{"5PlU":function(e,t,o){var a=o("RY/4"),n=o("dSzd")("iterator"),i=o("/bQp");e.exports=o("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[n]||"@@iterator"in t||i.hasOwnProperty(a(t))}},BO1k:function(e,t,o){e.exports={default:o("fxRn"),__esModule:!0}},Xd32:function(e,t,o){o("+tPU"),o("zQR9"),e.exports=o("5PlU")},d7EF:function(e,t,o){"use strict";t.__esModule=!0;var a=i(o("us/S")),n=i(o("BO1k"));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,a.default)(Object(e)))return function(e,t){var o=[],a=!0,i=!1,s=void 0;try{for(var l,r=(0,n.default)(e);!(a=(l=r.next()).done)&&(o.push(l.value),!t||o.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw s}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},fxRn:function(e,t,o){o("+tPU"),o("zQR9"),e.exports=o("g8Ux")},g8Ux:function(e,t,o){var a=o("77Pl"),n=o("3fs2");e.exports=o("FeBl").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},pXsP:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("d7EF"),n=o.n(a),i=o("neeE"),s=o("Zhn7"),l=(o("Fd2+"),{components:{loginModal:i.a,verCode:s.a},data:function(){return{bg:"background-image:url("+o("fez0")+")",checkLoginData:{account:"",password:"",verCode:""},canGetCode:!0,loginData:{type:"",code:""},myTel:"",myEmail:"",myGoogle:"",bindGoogleAuth:!1,bindEmail:!1,bindCellphone:!1,checkLogin:!1,getCodeTimes:0,codeTexti18n:"getMsgCode",second:"",myCode:!1,verCodeNumArr:[0,1,2,3,4,5,6,7,8,9],verCodeStr:"",oldPath:"",canSubmit:!1}},mounted:function(){this.createCode(this.verCodeNumArr,4)},methods:{createCode:function(e,t){for(var o="",a=0;a<t;a++)o+=this.verCodeNumArr[this.Util.randomNum(0,this.verCodeNumArr.length)];this.verCodeStr=o},sendCode:function(){var e=this;if(!this.canGetCode)return!1;this.countDown();var t="2"==this.loginData.type?["3",this.myEmail]:["2",this.myTel],o=n()(t,2),a=o[0],i=o[1];this.request(this.api.code,{type:a,account:i,showLoading:!0}).then(function(t){"0"==t.code?(e.myCode=!0,e.successMsg(t.msg)):e.errMsg(t.msg||"获取验证码失败")})},countDown:function(){var e=this;this.timer=this.Util.timerCounter({onStart:function(t){e.canGetCode=!1,e.getCodeTimes+=1,e.second=t+"s",e.codeTexti18n="countDown"},onCounting:function(t){e.second="("+t+"s)",e.codeTexti18n="countDown"},onComplete:function(){e.canGetCode=!0,e.getCodeTimes>0&&(e.codeTexti18n="tryAgain",e.second="")}})},validate:function(e,t){if(""!=e)switch(this.canSubmit=!0,t){case"account":this.Util.isUserName(e)||(this.errMsg("label159"),this.canSubmit=!1);break;case"cellphone":this.Util.isPhone(e)||this.Util.isEmail(e)||(this.errMsg("label156"),this.canSubmit=!1);break;case"verCode":e!=this.verCodeStr&&(this.errMsg("label126"),this.canSubmit=!1)}},loginHandle:function(){var e=this;if(""!=this.loginData.code){var t="";"0"==this.loginData.type?t=this.checkLoginData.account:"1"==this.loginData.type?t=this.myTel:"2"==this.loginData.type&&(t=this.myEmail),this.request(this.api.login,{type:this.loginData.type,code:this.loginData.code,account:t,showLoading:!0}).then(function(t){if(t&&"0"!=t.code)return e.errMsg(t.msg||"登录失败"),!1;e.successMsg(t.msg),e.userModel.isLogin=!0,e.storage.set("isLogin",!0),e.storage.set("token",t.data.token),t.data.userinfo&&t.data.userinfo[0]&&(e.userModel.cellphone=t.data.userinfo[0].tel,e.userModel.email=t.data.userinfo[0].email,e.storage.set("cellphone",t.data.userinfo[0].tel||""),e.storage.set("email",t.data.userinfo[0].email||"")),e.storage.set("tradePasswordChecked",!1),e.navigateTo("/")})}else this.errMsg("请填写完整信息")},loginStep:function(){var e=this;this.canSubmit&&this.request(this.api.checklogin,{account:this.checkLoginData.account,password:this.checkLoginData.password,showLoading:!0}).then(function(t){if(t&&"30"==t.code)return e.errMsg(t.msg||"登录失败"),!1;e.bindGoogleAuth=t.data.isgoogle,e.bindCellphone=t.data.istel,e.bindEmail=t.data.isemail,e.myTel=t.data.tel||"",e.myEmail=t.data.email||"",e.myGoogle=t.data.google||"",e.checkLogin=!0})},onTypeChage:function(){this.timer&&clearInterval(this.timer),this.codeTexti18n="getMsgCode",this.loginData.code="",this.second="",this.canGetCode=!0,this.myCode=!1}},watch:{"loginData.type":"onTypeChage"}}),r={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content p-rel",style:e.bg},[o("login-modal",{staticClass:"resize",attrs:{titleText:e.$t("login")||"登录"}},[o("el-form",{attrs:{"label-position":"top"},nativeOn:{submit:function(e){e.preventDefault()}}},[e.checkLogin?[o("el-form-item",{attrs:{label:e.$t("loginAuth")||"登录验证"}},[o("el-radio-group",{model:{value:e.loginData.type,callback:function(t){e.$set(e.loginData,"type",t)},expression:"loginData.type"}},[o("el-radio",{attrs:{disabled:!e.bindCellphone,label:"1"}},[e._v(e._s(e.$t("mobileCode")||"手机验证码"))]),e._v(" "),o("el-radio",{attrs:{label:"0",disabled:!e.bindGoogleAuth}},[e._v("\n              "+e._s(e.$t("googleCode")||"谷歌验证码")+"\n            ")]),e._v(" "),o("el-radio",{attrs:{label:"2",disabled:!e.bindEmail}},[e._v("\n              "+e._s(e.$t("label161")||"邮箱验证码")+"\n            ")])],1)],1),e._v(" "),o("div",{staticClass:"mobile-code-wrap p-rel"},[o("el-input",{directives:[{name:"show",rawName:"v-show",value:""!=e.loginData.type&&"0"!=e.loginData.type,expression:"loginData.type!=''&&loginData.type!='0'"}],attrs:{name:"mobileCode",placeholder:e.myCode?"1"==e.loginData.type?e.$t("mobileCodePlaceholder"):e.$t("emailCodePlaceholder"):e.$t("label170"),disabled:!e.myCode},model:{value:e.loginData.code,callback:function(t){e.$set(e.loginData,"code",t)},expression:"loginData.code"}}),e._v(" "),o("el-input",{directives:[{name:"show",rawName:"v-show",value:""!=e.loginData.type&&"0"==e.loginData.type,expression:"loginData.type!=''&&loginData.type=='0'"}],attrs:{name:"googleCode",placeholder:e.$t("fillGoogleCode")||"请输入谷歌验证码"},model:{value:e.loginData.code,callback:function(t){e.$set(e.loginData,"code",t)},expression:"loginData.code"}}),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.loginData.type&&"0"!=e.loginData.type,expression:"loginData.type!=''&&loginData.type!='0'"}],staticClass:"mobile-code abs-v-center color-danger",on:{click:e.sendCode}},[e._v(e._s(e.$t(this.codeTexti18n))+e._s(e.second)+"\n          ")])],1),e._v(" "),o("el-form-item",[o("button",{staticClass:"btn-block btn-large btn-danger btn-active",domProps:{textContent:e._s(e.$t("login")||"登录")},on:{click:e.loginHandle}})])]:[o("el-form-item",{attrs:{label:e.$t("label154")}},[o("el-input",{attrs:{autocomplete:"off",placeholder:e.$t("label162")},model:{value:e.checkLoginData.account,callback:function(t){e.$set(e.checkLoginData,"account",t)},expression:"checkLoginData.account"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("password")||"密码"}},[o("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:e.$t("pwdPlaceholder")||"请输入密码"},on:{blur:function(t){e.validate(e.checkLoginData.password,"password")}},model:{value:e.checkLoginData.password,callback:function(t){e.$set(e.checkLoginData,"password",t)},expression:"checkLoginData.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("imgCode")||"验证码"}},[o("div",{staticClass:"code-wrap flex flex-between"},[o("el-input",{attrs:{placeholder:e.$t("imgCodePlaceholder")||"请输入验证码"},on:{blur:function(t){e.validate(e.checkLoginData.verCode,"verCode")}},model:{value:e.checkLoginData.verCode,callback:function(t){e.$set(e.checkLoginData,"verCode",t)},expression:"checkLoginData.verCode"}}),e._v(" "),o("div",{staticClass:"code",on:{click:function(t){e.createCode(e.verCodeNumArr,4)}}},[o("ver-code",{attrs:{contentHeight:38,identifyCode:e.verCodeStr}})],1)],1)]),e._v(" "),o("el-form-item",[o("button",{staticClass:"btn-block btn-large btn-danger btn-active",domProps:{textContent:e._s(e.$t("nextStep")||"下一步")},on:{click:e.loginStep}})]),e._v(" "),o("div",{staticClass:"flex flex-between"},[o("router-link",{attrs:{to:"/user/resetpwd"}},[e._v(e._s(e.$t("forgetPwd")||"忘记密码")+"?")]),e._v(" "),o("router-link",{staticClass:"go-reg",attrs:{to:"/user/register"},domProps:{textContent:e._s(e.$t("registerNow")||"立即注册")}})],1)]],2)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(l,r,!1,function(e){o("qgYS")},"data-v-a7b1cdb6",null);t.default=c.exports},qgYS:function(e,t){},"us/S":function(e,t,o){e.exports={default:o("Xd32"),__esModule:!0}}});