webpackJsonp([37],{"1bvH":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("neeE"),r=o("Zhn7"),i={components:{loginModal:a.a,verCode:r.a},data:function(){return{bg:"background-image:url("+o("fez0")+")",veriType:"0",formData:{account:"",code:"",password:"",verCode:""},second:"",mycode:!1,canGetCode:!0,verCodeStr:"",getCodeTimes:0,codeText:"获取验证码",codeTexti18n:"getMsgCode",verCodeNumArr:[0,1,2,3,4,5,6,7,8,9],canSubmit:!1}},mounted:function(){this.createCode(this.verCodeNumArr,4)},methods:{createCode:function(e,t){for(var o="",a=0;a<t;a++)o+=this.verCodeNumArr[this.Util.randomNum(0,this.verCodeNumArr.length)];this.verCodeStr=o},countDown:function(){var e=this;this.timer=this.Util.timerCounter({onStart:function(t){e.canGetCode=!1,e.getCodeTimes+=1,e.second=t+"s",e.codeTexti18n="countDown"},onCounting:function(t){e.second="("+t+"s)",e.codeTexti18n="countDown"},onComplete:function(){e.canGetCode=!0,e.getCodeTimes>0&&(e.codeTexti18n="tryAgain")}})},getcode:function(){var e=this;if(!this.canGetCode)return!1;this.countDown();var t=0==this.veriType?"2":"3";this.request(this.api.code,{account:this.formData.account,type:t,showLoading:!0}).then(function(t){"0"==t.code?(e.myCode=!0,e.successMsg(t.msg||"发送成功")):e.errMsg(t.msg||"发送失败")})},validate:function(e,t){if(""==e)return!1;switch(this.canSubmit=!0,t){case"account":this.Util.isPhone(e)||this.Util.isEmail(e)||(this.errMsg("label156"),this.canSubmit=!1);break;case"password":this.Util.isPassword(e)||(this.errMsg("密码必须包含字母"),this.canSubmit=!1);break;case"code":e!=this.mycode&&(this.errMsg("手机验证码不正确"),this.canSubmit=!1);break;case"verCode":e!=this.verCodeStr&&(this.errMsg("图形验证码不正确"),this.canSubmit=!1)}},submitForm:function(){var e=this;for(var t in this.formData)if(""==this.formData[t])return this.errMsg("请填写完整信息"),!1;this.request(this.api.forgetpwd,{type:this.veriType,account:this.formData.account,code:this.formData.code,password:this.formData.password}).then(function(t){"0"==t.code&&(e.successMsg(t.msg),e.navigateTo("/user/login"))})}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content p-rel",style:e.bg},[o("login-modal",{staticClass:"resize",attrs:{titleText:"重置登录密码"}},[o("el-form",{attrs:{"label-position":"top"},nativeOn:{submit:function(e){e.preventDefault()}}},[o("el-form-item",{attrs:{label:e.$t("label163")}},[o("el-radio-group",{model:{value:e.veriType,callback:function(t){e.veriType=t},expression:"veriType"}},[o("el-radio",{attrs:{label:"0"}},[e._v(e._s(e.$t("mobileCode")))]),e._v(" "),o("el-radio",{attrs:{label:"1"}},[e._v("\n            "+e._s(e.$t("label161"))+"\n          ")])],1)],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"==e.veriType,expression:'veriType=="0"'}],attrs:{label:e.$t("cellphone")}},[o("el-input",{attrs:{placeholder:e.$t("mobilePlaceholder"),maxlength:"11"},on:{blur:function(t){e.validate(e.formData.account,"account")}},model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1),e._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.veriType,expression:'veriType=="1"'}],attrs:{label:e.$t("email")}},[o("el-input",{attrs:{placeholder:e.$t("emailPlaceholder"),maxlength:"11"},on:{blur:function(t){e.validate(e.formData.account,"account")}},model:{value:e.formData.account,callback:function(t){e.$set(e.formData,"account",t)},expression:"formData.account"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"0"==e.veriType?e.$t("mobileCode"):e.$t("label161")}},[o("div",{staticClass:"mobile-code-wrap p-rel"},[o("el-input",{attrs:{autocomplete:"off",placeholder:"0"==e.veriType?e.$t("mobileCodePlaceholder"):e.$t("emailCodePlaceholder"),disabled:!e.myCode},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}}),e._v(" "),o("div",{staticClass:"mobile-code abs-v-center color-danger",on:{click:e.getcode}},[e._v(e._s(e.$t(this.codeTexti18n))+e._s(e.second)+"\n          ")])],1)]),e._v(" "),o("el-form-item",{attrs:{label:"登录密码"}},[o("el-input",{attrs:{autocomplete:"off",type:"password",placeholder:"请输入密码"},on:{blur:function(t){e.validate(e.formData.password,"password")}},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图形验证码"}},[o("div",{staticClass:"code-wrap flex flex-between"},[o("el-input",{attrs:{autocomplete:"off",placeholder:"请输入验证码"},on:{blur:function(t){e.validate(e.formData.verCode,"verCode")}},model:{value:e.formData.verCode,callback:function(t){e.$set(e.formData,"verCode",t)},expression:"formData.verCode"}}),e._v(" "),o("div",{staticClass:"code",on:{click:function(t){e.createCode(e.verCodeNumArr,4)}}},[o("ver-code",{attrs:{contentHeight:38,identifyCode:e.verCodeStr}})],1)],1)]),e._v(" "),o("el-form-item",[o("button",{staticClass:"btn-block btn-large btn-danger btn-active",on:{click:e.submitForm}},[e._v("提交\n        ")])])],1)],1)],1)},staticRenderFns:[]};var n=o("VU/8")(i,s,!1,function(e){o("ObXJ")},"data-v-2917b652",null);t.default=n.exports},ObXJ:function(e,t){}});