webpackJsonp([24],{syAC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("NLrs"),o=s("QPSP"),a=s("JRrC"),i=s("Fd2+"),l=s("i7Lb"),c=s("qM28"),r=s("XJyL"),v={components:{appHeader:n.a,slidePop:o.a,userAside:a.a,Picker:i.k},mixins:[l.a],data:function(){return{showPicker:!1,tradeCoins:[],tradecoinid:"",active:0,price:"",sellnumber:"",buynumber:"",icon:!1,coinInfo:{},daynumber:{},otcRecord:[],otcRecordByType:[],otcSellRecord:[],bankinfo:{}}},computed:{miniumNum:function(){return"数量(最少"+1*(this.coinInfo.minnum||0)+")"},buycny:function(){return 1*(this.coinInfo.buycny||0)},sellcny:function(){return 1*(this.coinInfo.sellcny||0)},usable:function(){return"可用："+1*(this.daynumber.usable||0)+"&nbsp;"+(this.coinInfo.coinid||"")},buydisabled:function(){return!(this.buynumber&&!isNaN(this.buynumber))},selldisabled:function(){return!(this.sellnumber&&!isNaN(this.sellnumber))},sellTotal:function(){return this.coinInfo.sellcny&&this.sellnumber?this.coinInfo.sellcny*this.sellnumber:0},buyTotal:function(){return this.coinInfo.buycny&&this.buynumber?this.coinInfo.buycny*this.buynumber:0}},mounted:function(){var t=this;Object(r.I)().then(function(e){e.length>0&&(t.tradeCoins=e,t.coinInfo=e[0],Object(r.B)(t.coinInfo.coinid).then(function(e){t.daynumber=e}),Object(r.L)(t.coinInfo.coinid,t.active).then(function(e){e&&(t.otcRecordByType=e)}))}),Object(r.K)().then(function(e){e&&(t.bankinfo=e)})},methods:{pickerTrigger:function(){this.showPicker=!0},validate:function(t){return t>=this.coinInfo.minnum},getNote:function(){for(var t="",e=0;e<6;e++)t+=Object(c.a)(0,9);return t},buyOtc:function(){var t=this.getNote();this.validate(this.buynumber)?Object(r._0)({coin:this.coinInfo.coinid,number:this.buynumber,jz:this.buyTotal,id:this.bankinfo.autoid,bz:t}):this.$toast({message:"买入数量不能小于最小值",position:"bottom"})},sellOtc:function(){this.validate(this.sellnumber)?Object(r._1)(this.coinInfo.coinid,this.sellnumber,this.sellTotal):this.$toast({message:"卖出数量不能小于最小值",position:"bottom"})},onConfirm:function(t){this.coinInfo=t,this.showPicker=!1},cancelPicker:function(){this.showPicker=!1}},watch:{showPicker:function(t){this.icon=t},active:function(t){var e=this;this.sellnumber="",this.buynumber="",2==t&&Object(r.J)().then(function(t){e.otcRecord=t}),Object(r.L)(this.coinInfo.coinid,t).then(function(t){t&&(e.otcRecordByType=t)})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main h-full"},[s("slide-pop",{attrs:{showPop:t.showPop},on:{onClose:t.slideClose}},[s("user-aside",{attrs:{slot:"content"},slot:"content"})],1),t._v(" "),s("app-header",{attrs:{iconLeft:t.assetConfig.imgs.user_head_portrait},on:{onHeadClick:t.slideShow}},[s("div",{staticClass:"coin h-full font-16 abs-vh-center",attrs:{slot:"title"},on:{click:function(e){return e.target!==e.currentTarget?null:t.pickerTrigger(e)}},slot:"title"},[t._v(t._s(t.coinInfo.coinid)+"\n      "),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:!t.icon,expression:"!icon"}],attrs:{name:t.assetConfig.imgs.nav_otc_arrow_down}}),t._v(" "),s("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.icon,expression:"icon"}],attrs:{name:t.assetConfig.imgs.nav_otc_arrow_upper}})],1),t._v(" "),s("div",{staticClass:"font-14 h-35 riple flex flex-v-center color-999",attrs:{slot:"right"},on:{click:function(e){t.navigateTo("/trade/tradeStatement")}},slot:"right"},[t._v("交易须知")])]),t._v(" "),s("div",{staticClass:"content overflow-y"},[s("van-tabs",{attrs:{sticky:"","offset-top":"55",color:"#fe0042"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tab",{attrs:{title:"买入"}},[s("div",{staticClass:"form"},[s("div",{staticClass:"guide-price color-999 font-14",domProps:{innerHTML:t._s(t.usable)}}),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom color-999"},[s("input",{attrs:{disabled:"",placeholder:"价格"},domProps:{value:t.buycny}}),t._v(" "),s("div",{staticClass:"label"},[t._v("CNY")])]),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.buynumber,expression:"buynumber",modifiers:{number:!0}}],attrs:{placeholder:t.miniumNum},domProps:{value:t.buynumber},on:{input:function(e){e.target.composing||(t.buynumber=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"label",domProps:{textContent:t._s(t.coinInfo.coinid||"")}})]),t._v(" "),s("p",{staticClass:"total font-16"},[t._v("总计："+t._s(t.buyTotal))]),t._v(" "),s("p",{staticClass:"tips color-danger"},[t._v("* 仅支持银行卡支付，支付期限不限")]),t._v(" "),s("button",{staticClass:"btn-block btn-large riple btn-block btn-danger",attrs:{disabled:t.buydisabled},on:{click:t.buyOtc}},[t._v("买入")])]),t._v(" "),t._l(t.otcRecordByType,function(e,n){return s("dl",{key:n,staticClass:"record"},[s("dt",{staticClass:"flex van-hairline--bottom flex-between flex-v-center"},[s("div",[s("div",{staticClass:"money font-16 font-bold",domProps:{textContent:t._s(e.hz)}}),t._v(" "),s("div",{class:0==e.state?"color-danger":"color-success"},[t._v(t._s(0==e.state?"待付款":"已完成"))])]),t._v(" "),s("div",{staticClass:"type font-14 color-danger"},[t._v("买入")])]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",[t._v("总价")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.zj||0))}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("数量")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.number||0))}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("单价")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.price||0))}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("打款账号")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.bankcard)}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("备注")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.bz)}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("时间")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.wdate)}})])])})],2),t._v(" "),s("van-tab",{attrs:{title:"卖出"}},[s("div",{staticClass:"form"},[s("div",{staticClass:"guide-price color-999 font-14",domProps:{innerHTML:t._s(t.usable)}}),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom color-999"},[s("input",{attrs:{disabled:"",type:"text",placeholder:"价格"},domProps:{value:t.sellcny}}),t._v(" "),s("div",{staticClass:"label"},[t._v("CNY")])]),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.sellnumber,expression:"sellnumber",modifiers:{number:!0}}],attrs:{placeholder:t.miniumNum},domProps:{value:t.sellnumber},on:{input:function(e){e.target.composing||(t.sellnumber=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"label",domProps:{textContent:t._s(t.coinInfo.coinid)}})]),t._v(" "),s("p",{staticClass:"total font-16"},[t._v("总计："+t._s(t.sellTotal))]),t._v(" "),s("p",{staticClass:"tips color-danger"},[t._v("* 仅支持银行卡支付，支付期限不限")]),t._v(" "),s("button",{staticClass:"btn-block btn-large riple btn-block btn-success",attrs:{disabled:t.selldisabled},on:{click:t.sellOtc}},[t._v("卖出")])]),t._v(" "),t._l(t.otcRecordByType,function(e,n){return s("dl",{key:n,staticClass:"record"},[s("dt",{staticClass:"flex van-hairline--bottom flex-between flex-v-center"},[s("div",[s("div",{staticClass:"money font-16 font-bold",domProps:{textContent:t._s(e.hz)}}),t._v(" "),s("div",{class:0==e.state?"color-danger":"color-success"},[t._v(t._s(0==e.state?"待收款":"已完成"))])]),t._v(" "),s("div",{staticClass:"type font-14 color-danger"},[t._v("卖出")])]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",[t._v("总价")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.zj||0))}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("数量")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.number||0))}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("单价")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.price||0))}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("收款账号")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.bankcard)}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("备注")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.bz)}})]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("时间")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.wdate)}})])])})],2),t._v(" "),s("van-tab",{attrs:{title:"OTC记录"}},t._l(t.otcRecord,function(e,n){return s("dl",{key:n,staticClass:"record"},[s("dt",{staticClass:"flex van-hairline--bottom flex-between flex-v-center"},[s("div",[s("div",{staticClass:"money font-16 font-bold"},[t._v(t._s(1*e.zj)+" CNY")]),t._v(" "),0==e.type&&0==e.state?s("div",{staticClass:"status font-13 color-danger"},[t._v("待付款")]):t._e(),t._v(" "),1==e.type&&0==e.state?s("div",{staticClass:"status font-13 color-danger"},[t._v("待收款")]):t._e(),t._v(" "),0==e.type&&1==e.state?s("div",{staticClass:"status font-13 color-success"},[t._v("已完成")]):t._e(),t._v(" "),1==e.type&&1==e.state?s("div",{staticClass:"status font-13 color-success"},[t._v("已完成")]):t._e()]),t._v(" "),s("div",{staticClass:"type font-14 color-danger"},[t._v(t._s(0==e.type?"买入":"卖出"))])]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("数量")]),t._v(" "),s("span",[t._v(t._s(1*e.number))])]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("单价")]),t._v(" "),s("span",[t._v(t._s(1*e.price))])]),t._v(" "),s("dd",{staticClass:"font-14 h-45 flex flex-between flex-v-center"},[s("span",{staticClass:"color-999"},[t._v("时间")]),t._v(" "),s("span",[t._v(t._s(e.wdate))])])])}),0)],1)],1),t._v(" "),s("transition",{attrs:{name:"van-slide-up"}},[s("van-picker",{directives:[{name:"show",rawName:"v-show",value:t.showPicker,expression:"showPicker"}],attrs:{title:"OTC币种","show-toolbar":"",columns:t.tradeCoins,"value-key":"coinid","visible-item-count":"3"},on:{confirm:t.onConfirm,cancel:t.cancelPicker}})],1)],1)},staticRenderFns:[]};var f=s("VU/8")(v,d,!1,function(t){s("uOU/")},"data-v-5bb8c44e",null);e.default=f.exports},"uOU/":function(t,e){}});