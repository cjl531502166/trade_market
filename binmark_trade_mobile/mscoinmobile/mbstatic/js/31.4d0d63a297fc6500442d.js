webpackJsonp([31],{"27+m":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("//Fk"),o=s.n(n),i=s("NLrs"),a=s("QPSP"),r=s("JRrC"),l=s("i7Lb"),c=s("qM28"),d=s("XJyL"),v=s("Fd2+"),u=s("y/UZ"),p={components:{appHeader:i.a,slidePop:a.a,userAside:r.a,Picker:v.k},mixins:[l.a],data:function(){return{showPicker:!1,tradeCoins:[],tradecoinid:"",active:0,buyprice:"",sellprice:"",sellnumber:"",buynumber:"",coinInfo:{},daynumber:{},marketOrderList:[],myPublishedOrder:[],myTradingOrderList:[],historyOrder:[]}},mounted:function(){var t=this;Object(d.S)().then(function(e){e&&(t.coinInfo=e[0],t.tradeCoins=e,Object(d.B)(t.coinInfo.coinid).then(function(e){t.daynumber=e}),Object(d.U)(t.coinInfo.coinid,t.active).then(function(e){e&&(t.marketOrderList=e)}))})},computed:{miniumNum:function(){return"数量(最少"+1*(this.coinInfo.minnum||0)+")"},buydisabled:function(){return!(this.buynumber&&!isNaN(this.buynumber))},selldisabled:function(){return!(this.sellnumber&&!isNaN(this.sellnumber))},buyTotal:function(){return this.buynumber*this.buyprice},sellTotal:function(){return this.sellnumber*this.sellprice}},methods:{actionTrigger:function(){this.showPicker=!0},onConfirm:function(t){this.coinInfo=t,this.showPicker=!1},cancelPicker:function(){this.showPicker=!1},beforeBuy:function(){return this.buynumber<this.coinInfo.minnum?(this.$toast({message:"买入数量不能小于最小值",position:"bottom"}),!1):!isNaN(this.buyTotal)||(this.$toast({message:"价格或者数量不合法",position:"bottom"}),!1)},beforeSell:function(){return this.sellnumber<this.coinInfo.minnum?(this.$toast({message:"卖出数量不能小于最小值",position:"bottom"}),!1):!isNaN(this.sellTotal)||(this.$toast({message:"价格或者数量不合法",position:"bottom"}),!1)},addBuy:function(){var t=this;this.beforeBuy()&&Object(d.g)(this.coinInfo.coinid,this.buyprice,this.buynumber).then(function(t){return o.a.resolve()}).then(function(){t.getc2cOrderByType(t.coinInfo.coinid,ths.active).then(function(e){e&&(t.marketOrderList=e)})})},addSell:function(){var t=this;this.beforeSell()&&Object(d.h)(this.coinInfo.coinid,this.sellprice,this.sellnumber).then(function(t){return o.a.resolve()}).then(function(){t.getc2cOrderByType(t.coinInfo.coinid,ths.active).then(function(e){e&&(t.marketOrderList=e)})})},buyC2cCoin:function(t){var e=this;t&&Object(d.l)(t).then(function(t){Object(d.U)(e.coinInfo.coinid,e.active).then(function(t){t&&(e.marketOrderList=t)})})},sellC2cCoin:function(t){var e=this;t&&Object(d._5)(t).then(function(t){Object(d.U)(e.coinInfo.coinid,e.active).then(function(t){t&&(e.marketOrderList=t)})})}},watch:{active:function(t){var e=this;switch(Object(d.U)(this.coinInfo.coinid,this.active).then(function(t){t&&(e.marketOrderList=t)}),this.showPicker=!1,t){case 2:Object(u.u)().then(function(t){if(t&&t.length>0){Object(c.c)(t,"price","number");e.myPublishedOrder=t}});break;case 3:Object(d.G)().then(function(t){t&&t.length>0&&(e.myTradingOrderList=t)});break;case 4:Object(d.T)().then(function(t){t&&t.length>0&&(e.historyOrder=t)})}}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main h-full"},[s("slide-pop",{attrs:{showPop:t.showPop},on:{onClose:t.slideClose}},[s("user-aside",{attrs:{slot:"content"},slot:"content"})],1),t._v(" "),s("app-header",{attrs:{iconLeft:t.assetConfig.imgs.user_head_portrait},on:{onHeadClick:t.slideShow}},[s("div",{staticClass:"coin font-16 abs-vh-center",attrs:{slot:"title"},domProps:{textContent:t._s(t.coinInfo.coinid)},slot:"title"}),t._v(" "),s("div",{staticClass:"font-14 h-35 flex flex-v-center color-999",attrs:{slot:"right"},on:{click:function(e){return e.target!==e.currentTarget?null:t.actionTrigger(e)}},slot:"right"},[t._v("选择币种")])]),t._v(" "),s("div",{staticClass:"content overflow-y"},[s("van-tabs",{attrs:{sticky:"","offset-top":"55px",color:"#fe0042"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tab",{attrs:{title:"买入"}},[s("div",{staticClass:"form"},[s("div",{staticClass:"guide-price color-999 font-14"},[t._v("指导价："+t._s(1*(t.coinInfo.cny||0))+" CNY")]),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.buyprice,expression:"buyprice"}],attrs:{type:"text",placeholder:"价格"},domProps:{value:t.buyprice},on:{input:function(e){e.target.composing||(t.buyprice=e.target.value)}}}),t._v(" "),s("div",{staticClass:"label"},[t._v("CNY")])]),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.buynumber,expression:"buynumber",modifiers:{number:!0}}],attrs:{placeholder:t.miniumNum},domProps:{value:t.buynumber},on:{input:function(e){e.target.composing||(t.buynumber=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"label",domProps:{textContent:t._s(t.coinInfo.coinid)}})]),t._v(" "),s("p",{staticClass:"total font-16"},[t._v("总计："+t._s(t.buyTotal))]),t._v(" "),s("button",{staticClass:"btn-block btn-large riple btn-block btn-danger",attrs:{disabled:t.buydisabled},on:{click:t.addBuy}},[t._v("买入")])])]),t._v(" "),s("van-tab",{attrs:{title:"卖出"}},[s("div",{staticClass:"form"},[s("div",{staticClass:"guide-price color-999 font-14"},[t._v("指导价："+t._s(1*(t.coinInfo.cny||0))+" CNY")]),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sellprice,expression:"sellprice"}],attrs:{type:"text",placeholder:"价格"},domProps:{value:t.sellprice},on:{input:function(e){e.target.composing||(t.sellprice=e.target.value)}}}),t._v(" "),s("div",{staticClass:"label"},[t._v("CNY")])]),t._v(" "),s("div",{staticClass:"input-wrap font-14 flex flex-v-center flex-between van-hairline--bottom"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.sellnumber,expression:"sellnumber",modifiers:{number:!0}}],attrs:{placeholder:t.miniumNum},domProps:{value:t.sellnumber},on:{input:function(e){e.target.composing||(t.sellnumber=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"label",domProps:{textContent:t._s(t.coinInfo.coinid)}})]),t._v(" "),s("p",{staticClass:"total font-16"},[t._v("总计："+t._s(t.sellTotal))]),t._v(" "),s("button",{staticClass:"btn-block btn-large riple btn-block btn-success",attrs:{disabled:t.selldisabled},on:{click:t.addSell}},[t._v("卖出")])])]),t._v(" "),s("van-tab",{attrs:{title:"我的订单"}},[s("div",{staticClass:"order-list"},t._l(t.myPublishedOrder,function(e){return s("dl",{key:e.autoid,staticClass:"order"},[s("dt",{staticClass:"font-bold flex flex-between"},[s("span",{staticClass:"font-16",domProps:{textContent:t._s(t.Store.state.userInfo.member)}}),t._v(" "),s("span",{staticClass:"status color-danger"},[t._v("进行中")])]),t._v(" "),s("dd",{staticClass:"flex flex-between"},[s("div",[s("span",{staticClass:"color-999"},[t._v("单号  ")]),t._v(" "),s("span",t._b({},"span",e.autoid,!1))]),t._v(" "),s("div",[s("span",{class:0==e.type?"color-danger":"color-success",domProps:{textContent:t._s(0==e.type?"买入":"卖出")}}),t._v("  \n                "),s("span",{staticClass:"color-999"},[t._v("类型")])])]),t._v(" "),s("dd",{staticClass:"flex flex-between"},[s("div",[s("span",{staticClass:"color-999"},[t._v("价格  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.price||0))}})]),t._v(" "),s("div",[s("span",{staticClass:"color-danger"},[t._v(t._s(e.wdate)+"  ")]),t._v(" "),s("span",{staticClass:"color-999"},[t._v("时间")])])]),t._v(" "),s("dd",[s("span",{staticClass:"color-999"},[t._v("数量  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*(e.price||0))}})]),t._v(" "),s("dd",{staticClass:"total van-hairline--bottom"},[s("span",{staticClass:"color-666"},[t._v("总计  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.total||0)}})])])}),0),t._v(" "),0==t.myPublishedOrder.length?s("no-record"):t._e()],1),t._v(" "),s("van-tab",{attrs:{title:"交易中"}},[s("div",{staticClass:"order-list"},t._l(t.myTradingOrderList,function(e){return s("dl",{key:e.autoid,staticClass:"order",on:{click:function(s){t.navigateTo("/trade/order_detail",{id:e.autoid,type:e.type})}}},[s("dt",{staticClass:"font-bold flex flex-between"},[s("span",{staticClass:"font-16",domProps:{textContent:t._s(e.buyname)}}),t._v(" "),s("span",{staticClass:"status color-danger"},[t._v("进行中")])]),t._v(" "),s("dd",{staticClass:"flex flex-between"},[s("div",[s("span",{staticClass:"color-999"},[t._v("单号  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.autoid)}})]),t._v(" "),s("div",[s("span",{class:0==e.type?"color-danger":"color-success",domProps:{textContent:t._s(0==e.type?"买入":"卖出")}}),t._v("  \n                "),s("span",{staticClass:"color-999"},[t._v("类型")])])]),t._v(" "),s("dd",{staticClass:"flex flex-between"},[s("div",[s("span",{staticClass:"color-999"},[t._v("价格  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.price)}})]),t._v(" "),s("div",[s("span",{staticClass:"color-danger",domProps:{textContent:t._s(e.sdate)}}),t._v("  \n                "),s("span",{staticClass:"color-999"},[t._v("时间")])])]),t._v(" "),s("dd",[s("span",{staticClass:"color-999"},[t._v("数量  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.number)}})]),t._v(" "),s("dd",{staticClass:"total van-hairline--bottom"},[s("span",{staticClass:"color-666"},[t._v("总计  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.zj)}})])])}),0),t._v(" "),0==t.myTradingOrderList.length?s("no-record"):t._e()],1),t._v(" "),s("van-tab",{attrs:{title:"历史订单"}},[s("div",{staticClass:"order-list"},t._l(t.historyOrder,function(e){return s("dl",{key:e.autoid,staticClass:"order"},[s("dt",{staticClass:"font-bold flex flex-between"},[s("span",{staticClass:"font-16",domProps:{textContent:t._s(e.member)}}),t._v(" "),s("span",{staticClass:"status color-666"},[t._v("已完成")])]),t._v(" "),s("dd",{staticClass:"flex flex-between"},[s("div",[s("span",{staticClass:"color-999"},[t._v("单号  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.autoid)}})]),t._v(" "),s("div",[s("span",{staticClass:"color-danger",domProps:{textContent:t._s(1==e.type?"卖出":"买入")}}),t._v(" "),s("span",{staticClass:"color-999"},[t._v(" 类型")])])]),t._v(" "),s("dd",{staticClass:"flex flex-between"},[s("div",[s("span",{staticClass:"color-999"},[t._v("价格  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.price)}})]),t._v(" "),s("div",[s("span",{domProps:{textContent:t._s(e.wdate)}}),t._v(" "),s("span",{staticClass:"color-999"},[t._v("  时间")])])]),t._v(" "),s("dd",[s("span",{staticClass:"color-999"},[t._v("数量  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.number)}})]),t._v(" "),s("dd",{staticClass:"total van-hairline--bottom"},[s("span",{staticClass:"color-666"},[t._v("总计  ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.zj)}})])])}),0),t._v(" "),0==t.historyOrder.length?s("no-record"):t._e()],1)],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.active<=1,expression:"active<=1"}],staticClass:"market-list"},[s("div",{staticClass:"font-14 color-999 font-bold"},[t._v("市场挂单（只显示在线商家）")]),t._v(" "),t.marketOrderList.length>0?s("div",{staticClass:"list-item"},t._l(t.marketOrderList,function(e,n){return s("van-row",{key:n,staticClass:"item flex flex-v-center"},[s("van-col",{attrs:{span:"14"}},[s("p",{staticClass:"dt font-16 font-bold",domProps:{textContent:t._s(e.member)}}),t._v(" "),s("p",{staticClass:"dd font-14"},[s("span",{staticClass:"color-999"},[t._v("数量 ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.number)}})]),t._v(" "),s("p",{staticClass:"dd font-14"},[s("span",{staticClass:"color-999"},[t._v("日期 ")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.wdate)}})])]),t._v(" "),s("van-col",{attrs:{span:"6"}},[s("p",{staticClass:"dt font-18 font-bold"}),t._v(" "),s("p",{staticClass:"dd font-14"},[s("span",{staticClass:"color-999"},[t._v("价格 ")]),t._v(" "),s("span",{domProps:{textContent:t._s(1*e.price)}})]),t._v(" "),s("p",{staticClass:"dd font-14"},[s("span",{staticClass:"color-999"},[t._v("总计 ")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.number*e.price)}})])]),t._v(" "),s("van-col",{staticClass:"flex col-last",attrs:{span:"4"}},[1==e.type?s("button",{staticClass:"btn-rounded btn-danger riple thumb-40 font-14",on:{click:function(s){t.buyC2cCoin(e.autoid)}}},[t._v("买入")]):s("button",{staticClass:"btn-rounded btn-danger riple thumb-40 font-14",on:{click:function(s){t.sellC2cCoin(e.autoid)}}},[t._v("卖出")])])],1)}),1):t._e(),t._v(" "),0==t.marketOrderList.length?s("no-record"):t._e()],1)],1),t._v(" "),s("transition",{attrs:{name:"van-slide-up"}},[s("van-picker",{directives:[{name:"show",rawName:"v-show",value:t.showPicker,expression:"showPicker"}],attrs:{title:"C2C币种","show-toolbar":"",columns:t.tradeCoins,"value-key":"coinid","visible-item-count":"3"},on:{confirm:t.onConfirm,cancel:t.cancelPicker}})],1)],1)},staticRenderFns:[]};var _=s("VU/8")(p,m,!1,function(t){s("QIZG")},"data-v-3099f378",null);e.default=_.exports},QIZG:function(t,e){}});